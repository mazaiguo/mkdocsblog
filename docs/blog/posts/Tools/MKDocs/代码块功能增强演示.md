---
title: ä»£ç å—åŠŸèƒ½å¢å¼ºæ¼”ç¤º
date: 2025-11-04
categories:
  - å¼€å‘å·¥å…·
  - Tools
tags:
  - Python
  - helper
  - MkDocs
  - MarkDown
description: ä½¿ç”¨mkdocséšè—ä»£ç 
authors:
  - JerryMa
---

# ä»£ç å—åŠŸèƒ½å¢å¼ºæ¼”ç¤º

æœ¬é¡µé¢å±•ç¤ºä»£ç å—æŠ˜å åŠŸèƒ½çš„ä¸¤ä¸ªé‡è¦å¢å¼ºï¼š

1. **ä¼˜åŒ–çš„æŒ‰é’®å¸ƒå±€** - æŠ˜å æŒ‰é’® + å¤åˆ¶æŒ‰é’®çš„åè°ƒæ’åˆ—
2. **Markdownæ ‡è®°æ§åˆ¶** - ç›´æ¥åœ¨Markdownä¸­æ ‡è®°ä»£ç å—çš„åˆå§‹æŠ˜å çŠ¶æ€

## å¸¸è§„éšè—ä»£ç (ä¸æ¨è)

ä½¿ç”¨ä¾èµ–æ¨¡å—: `pymdownx.details`

??? note "æ ‡é¢˜"
    å†…å®¹

    ```javascript
        document$.subscribe(function() {
          var tables = document.querySelectorAll("article table:not([class])")
          tables.forEach(function(table) {
            new Tablesort(table)
          })
        })
    ```

![img](https://gitlab.com/zw2d/blogimg/-/raw/main/pictures/2025/11/4_16_47_36_20251104-PixPin_2025-11-04_16-47-18.png)

è¿™æ ·ç ´åäº†markdownçš„æ ·å¼ï¼Œé™¤éåœ¨mkdocsçš„åšå®¢é¡µé¢æŸ¥çœ‹ï¼Œåœ¨markdownä¸­é˜…è¯»éå¸¸éš¾çœ‹

## ğŸ¨ 1. ä¼˜åŒ–çš„æŒ‰é’®å¸ƒå±€

æ–°çš„æŒ‰é’®å¸ƒå±€æ›´åŠ åè°ƒç¾è§‚ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”´ ğŸŸ¡ ğŸŸ¢      è¯­è¨€æ ‡è¯†      [ğŸ”½] [ğŸ“‹ Copy]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     åœ†ç‚¹      è¯­è¨€åç§°        æŠ˜å    å¤åˆ¶
```

### å¸ƒå±€é¡ºåºï¼ˆä»å·¦åˆ°å³ï¼‰

1. **macOSåœ†ç‚¹** - çº¢é»„ç»¿ä¸‰è‰²åœ†ç‚¹ï¼Œå›ºå®šåœ¨å·¦ä¸Šè§’
2. **è¯­è¨€æ ‡è¯†** - å±…ä¸­æ˜¾ç¤ºè¯­è¨€åç§°
3. **æŠ˜å æŒ‰é’®** - å¯ç‚¹å‡»çš„å‘ä¸Š/å‘ä¸‹ç®­å¤´
4. **å¤åˆ¶æŒ‰é’®** - æœ€å³ä¾§çš„CopyæŒ‰é’®

### æ™®é€šä»£ç å—ç¤ºä¾‹

```python
# è¿™ä¸ªä»£ç å—å±•ç¤ºäº†æ–°çš„æŒ‰é’®å¸ƒå±€
# æ³¨æ„è§‚å¯Ÿæ ‡é¢˜æ å³ä¾§çš„æŒ‰é’®æ’åˆ—ï¼š[æŠ˜å ] [å¤åˆ¶]

def button_layout_demo():
    """æ¼”ç¤ºæ–°çš„æŒ‰é’®å¸ƒå±€æ•ˆæœ"""
    print("æŠ˜å æŒ‰é’®åœ¨å·¦ï¼Œå¤åˆ¶æŒ‰é’®åœ¨å³")
    print("æ•´ä½“å¸ƒå±€æ›´åŠ åè°ƒç¾è§‚")
    return "å¸ƒå±€ä¼˜åŒ–å®Œæˆï¼"

# æµ‹è¯•æ–°å¸ƒå±€
result = button_layout_demo()
print(result)
```

### å¸¦æ–‡ä»¶åçš„ä»£ç å—ç¤ºä¾‹

```javascript title="layout-demo.js"
// å¸¦æ–‡ä»¶åçš„ä»£ç å—ä¹Ÿé‡‡ç”¨ç›¸åŒçš„æŒ‰é’®å¸ƒå±€
// æ–‡ä»¶åä¼šæ˜¾ç¤ºåœ¨åœ†ç‚¹å³ä¾§ï¼ŒæŒ‰é’®åœ¨æœ€å³è¾¹

class ButtonLayoutDemo {
    constructor() {
        this.layout = "åœ†ç‚¹ -> æ–‡ä»¶å -> æŠ˜å æŒ‰é’® -> å¤åˆ¶æŒ‰é’®";
    }
    
    showLayout() {
        console.log("æ–°çš„æŒ‰é’®å¸ƒå±€:");
        console.log("1. ğŸ”´ ğŸŸ¡ ğŸŸ¢ macOSé£æ ¼åœ†ç‚¹");
        console.log("2. ğŸ“„ æ–‡ä»¶å/è¯­è¨€æ ‡è¯†");
        console.log("3. ğŸ”½ æŠ˜å åˆ‡æ¢æŒ‰é’®");
        console.log("4. ğŸ“‹ å¤åˆ¶ä»£ç æŒ‰é’®");
        
        return this.layout;
    }
}

const demo = new ButtonLayoutDemo();
console.log(demo.showLayout());
```

## ğŸ·ï¸ 2. Markdownæ ‡è®°æ§åˆ¶åŠŸèƒ½

ç°åœ¨æ”¯æŒåœ¨Markdownä¸­ç›´æ¥æ ‡è®°ä»£ç å—çš„åˆå§‹æŠ˜å çŠ¶æ€ï¼

### æ”¯æŒçš„æ ‡è®°æ–¹å¼

#### æ–¹å¼1: åœ¨titleä¸­æ·»åŠ  `collapsed` å…³é”®å­—

```python title="auto-collapse.py collapsed"
# è¿™ä¸ªä»£ç å—ä¼šè‡ªåŠ¨æŠ˜å ï¼
# åœ¨titleåé¢æ·»åŠ  "collapsed" å…³é”®å­—å³å¯

def auto_collapsed_function():
    """è¿™ä¸ªå‡½æ•°åœ¨é¡µé¢åŠ è½½æ—¶ä¼šè¢«è‡ªåŠ¨æŠ˜å """
    print("æˆ‘è¢«è‡ªåŠ¨æŠ˜å äº†ï¼")
    print("ç‚¹å‡»æ ‡é¢˜æ å¯ä»¥å±•å¼€æŸ¥çœ‹")
    
    # æ”¯æŒçš„å…³é”®å­—:
    keywords = ["collapsed", "hidden", "fold", "minimize"]
    
    for keyword in keywords:
        print(f"æ”¯æŒå…³é”®å­—: {keyword}")
    
    return "è‡ªåŠ¨æŠ˜å æ¼”ç¤ºå®Œæˆ"

# é¡µé¢åŠ è½½æ—¶è¿™æ®µä»£ç ä¼šè¢«æŠ˜å 
result = auto_collapsed_function()
```

#### æ–¹å¼2: ä½¿ç”¨æ³¨é‡Šæ ‡è®°â­â­â­

```javascript
// collapsed
// åœ¨ä»£ç ç¬¬ä¸€è¡Œæ·»åŠ æ³¨é‡Šæ ‡è®°ä¹Ÿå¯ä»¥å®ç°è‡ªåŠ¨æŠ˜å 

function commentMarkerDemo() {
    // æ”¯æŒçš„æ³¨é‡Šæ ¼å¼:
    const markers = [
        "// collapsed",
        "# collapsed", 
        "/* collapsed */",
        "<!-- collapsed -->"
    ];
    
    console.log("æ”¯æŒå¤šç§æ³¨é‡Šæ ¼å¼çš„æŠ˜å æ ‡è®°");
    markers.forEach(marker => {
        console.log(`âœ“ ${marker}`);
    });
    
    return "æ³¨é‡Šæ ‡è®°æ¼”ç¤º";
}

commentMarkerDemo();
```

#### æ–¹å¼3: é•¿ä»£ç å—è‡ªåŠ¨æŠ˜å ç¤ºä¾‹

```csharp title="ComplexClass.cs hidden"
// è¿™æ˜¯ä¸€ä¸ªé•¿ä»£ç å—ï¼Œä½¿ç”¨äº† "hidden" æ ‡è®°è‡ªåŠ¨æŠ˜å 
using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;

namespace CodeToggleDemo
{
    /// <summary>
    /// å¤æ‚ç±»æ¼”ç¤º - è‡ªåŠ¨æŠ˜å çš„é•¿ä»£ç å—
    /// </summary>
    public class ComplexClassDemo
    {
        private readonly Dictionary<string, Func<string, Task<string>>> _processors;
        private readonly ILogger<ComplexClassDemo> _logger;
        
        public ComplexClassDemo(ILogger<ComplexClassDemo> logger)
        {
            _logger = logger ?? throw new ArgumentNullException(nameof(logger));
            _processors = new Dictionary<string, Func<string, Task<string>>>();
            InitializeProcessors();
        }
        
        private void InitializeProcessors()
        {
            _processors["markdown"] = ProcessMarkdownAsync;
            _processors["code"] = ProcessCodeAsync;
            _processors["html"] = ProcessHtmlAsync;
            
            _logger.LogInformation("å¤„ç†å™¨åˆå§‹åŒ–å®Œæˆï¼Œå…± {Count} ä¸ª", _processors.Count);
        }
        
        public async Task<ProcessResult> ProcessContentAsync(string content, string type)
        {
            try
            {
                if (!_processors.TryGetValue(type, out var processor))
                {
                    throw new NotSupportedException($"ä¸æ”¯æŒçš„å†…å®¹ç±»å‹: {type}");
                }
                
                var startTime = DateTime.UtcNow;
                var result = await processor(content);
                var duration = DateTime.UtcNow - startTime;
                
                _logger.LogInformation("å†…å®¹å¤„ç†å®Œæˆï¼Œè€—æ—¶ {Duration}ms", duration.TotalMilliseconds);
                
                return new ProcessResult
                {
                    Success = true,
                    Result = result,
                    ProcessingTime = duration,
                    ContentType = type
                };
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "å†…å®¹å¤„ç†å¤±è´¥");
                return new ProcessResult
                {
                    Success = false,
                    Error = ex.Message,
                    ContentType = type
                };
            }
        }
        
        private async Task<string> ProcessMarkdownAsync(string markdown)
        {
            await Task.Delay(50); // æ¨¡æ‹Ÿå¤„ç†
            return $"Processed Markdown: {markdown.Length} characters";
        }
        
        private async Task<string> ProcessCodeAsync(string code)
        {
            await Task.Delay(100); // æ¨¡æ‹Ÿå¤„ç†
            var lines = code.Split('\n').Length;
            return $"Processed Code: {lines} lines";
        }
        
        private async Task<string> ProcessHtmlAsync(string html)
        {
            await Task.Delay(75); // æ¨¡æ‹Ÿå¤„ç†
            return $"Processed HTML: {html.Length} characters";
        }
    }
    
    public class ProcessResult
    {
        public bool Success { get; set; }
        public string Result { get; set; }
        public string Error { get; set; }
        public TimeSpan ProcessingTime { get; set; }
        public string ContentType { get; set; }
    }
}
```

### æ ‡è®°å…³é”®å­—åˆ—è¡¨

æ”¯æŒä»¥ä¸‹å…³é”®å­—ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰ï¼š

- `collapsed` - æœ€å¸¸ç”¨çš„æŠ˜å æ ‡è®°
- `hidden` - éšè—æ ‡è®°
- `fold` - æŠ˜å æ ‡è®°  
- `minimize` - æœ€å°åŒ–æ ‡è®°

### ä½¿ç”¨æ–¹æ³•å¯¹æ¯”

| æ ‡è®°æ–¹å¼      | è¯­æ³•ç¤ºä¾‹                    | ä¼˜ç‚¹         | é€‚ç”¨åœºæ™¯         |
| ------------- | --------------------------- | ------------ | ---------------- |
| **titleæ ‡è®°** | `title="file.py collapsed"` | ç®€å•ç›´è§‚     | æœ‰æ–‡ä»¶åçš„ä»£ç å— |
| **æ³¨é‡Šæ ‡è®°**  | `// collapsed`              | ä¸å½±å“æ–‡ä»¶å | ä»»ä½•ä»£ç å—       |
| **ç±»åæ ‡è®°**  | `{.collapsed}`              | æ ‡å‡†Markdown | æ”¯æŒçš„è§£æå™¨     |

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### JavaScriptæ£€æµ‹é€»è¾‘

```javascript
function checkMarkdownCollapseMarkers(highlight) {
    // 1. æ£€æŸ¥æ–‡ä»¶åä¸­çš„æ ‡è®°
    const filenameElement = highlight.querySelector('span.filename');
    if (filenameElement) {
        const filename = filenameElement.textContent || '';
        if (filename.includes('collapsed')) return true;
    }
    
    // 2. æ£€æŸ¥æ³¨é‡Šæ ‡è®°
    const codeElement = highlight.querySelector('code');
    if (codeElement) {
        const firstLine = codeElement.textContent.split('\n')[0];
        if (firstLine.includes('// collapsed')) return true;
    }
    
    // 3. æ›´å¤šæ£€æµ‹æ–¹å¼...
    return false;
}
```

### CSSæŒ‰é’®å¸ƒå±€

```css
/* æŠ˜å æŒ‰é’®ä½ç½® */
.code-toggle-btn {
  right: 80px; /* ç»™å¤åˆ¶æŒ‰é’®ç•™ç©ºé—´ */
}

/* å¤åˆ¶æŒ‰é’®ä¿æŒæœ€å³ä¾§ */
.md-clipboard {
  right: 12px !important;
}
```

## ğŸ¯ å®é™…åº”ç”¨ç¤ºä¾‹

### æ•™ç¨‹æ–‡æ¡£åœºæ™¯

```html title="tutorial.html fold"
<!-- æ•™ç¨‹ä¸­çš„é•¿ç¤ºä¾‹ä»£ç å¯ä»¥é»˜è®¤æŠ˜å  -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®Œæ•´çš„HTMLç¤ºä¾‹</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
        .container { max-width: 1200px; margin: 0 auto; padding: 2rem; }
        .header { background: linear-gradient(135deg, #667eea, #764ba2); }
        .content { background: #ffffff; border-radius: 8px; }
        .footer { text-align: center; color: #666; }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>ä»£ç æŠ˜å åŠŸèƒ½æ¼”ç¤º</h1>
            <p>è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„HTMLç¤ºä¾‹ï¼Œé»˜è®¤ä¼šè¢«æŠ˜å </p>
        </header>
        
        <main class="content">
            <section>
                <h2>åŠŸèƒ½ç‰¹æ€§</h2>
                <ul>
                    <li>è‡ªåŠ¨æŠ˜å é•¿ä»£ç </li>
                    <li>ä¼˜åŒ–æŒ‰é’®å¸ƒå±€</li>
                    <li>Markdownæ ‡è®°æ§åˆ¶</li>
                </ul>
            </section>
        </main>
        
        <footer class="footer">
            <p>&copy; 2024 Code Toggle Demo</p>
        </footer>
    </div>
</body>
</html>
```

### APIæ–‡æ¡£åœºæ™¯

```python title="api_example.py minimize"
# APIæ–‡æ¡£ä¸­çš„å®Œæ•´ç¤ºä¾‹ï¼Œä½¿ç”¨minimizeæ ‡è®°è‡ªåŠ¨æŠ˜å 

import requests
import json
from typing import Dict, List, Optional
from dataclasses import dataclass
from datetime import datetime

@dataclass
class ApiResponse:
    """APIå“åº”æ•°æ®ç»“æ„"""
    success: bool
    data: Optional[Dict]
    message: str
    timestamp: datetime

class ApiClient:
    """APIå®¢æˆ·ç«¯ç±» - å®Œæ•´å®ç°"""
    
    def __init__(self, base_url: str, api_key: str):
        self.base_url = base_url.rstrip('/')
        self.api_key = api_key
        self.session = requests.Session()
        self.session.headers.update({
            'Authorization': f'Bearer {api_key}',
            'Content-Type': 'application/json',
            'User-Agent': 'CodeToggleDemo/1.0'
        })
    
    async def get_users(self, page: int = 1, limit: int = 10) -> ApiResponse:
        """è·å–ç”¨æˆ·åˆ—è¡¨"""
        url = f"{self.base_url}/users"
        params = {'page': page, 'limit': limit}
        
        try:
            response = self.session.get(url, params=params)
            response.raise_for_status()
            
            return ApiResponse(
                success=True,
                data=response.json(),
                message="ç”¨æˆ·åˆ—è¡¨è·å–æˆåŠŸ",
                timestamp=datetime.now()
            )
        except requests.RequestException as e:
            return ApiResponse(
                success=False,
                data=None,
                message=f"è¯·æ±‚å¤±è´¥: {str(e)}",
                timestamp=datetime.now()
            )
    
    async def create_user(self, user_data: Dict) -> ApiResponse:
        """åˆ›å»ºæ–°ç”¨æˆ·"""
        url = f"{self.base_url}/users"
        
        try:
            response = self.session.post(url, json=user_data)
            response.raise_for_status()
            
            return ApiResponse(
                success=True,
                data=response.json(),
                message="ç”¨æˆ·åˆ›å»ºæˆåŠŸ",
                timestamp=datetime.now()
            )
        except requests.RequestException as e:
            return ApiResponse(
                success=False,
                data=None,
                message=f"åˆ›å»ºå¤±è´¥: {str(e)}",
                timestamp=datetime.now()
            )

# ä½¿ç”¨ç¤ºä¾‹
async def main():
    client = ApiClient("https://api.example.com", "your-api-key")
    
    # è·å–ç”¨æˆ·åˆ—è¡¨
    users_response = await client.get_users(page=1, limit=5)
    if users_response.success:
        print("ç”¨æˆ·åˆ—è¡¨:", users_response.data)
    
    # åˆ›å»ºæ–°ç”¨æˆ·
    new_user = {
        "name": "å¼ ä¸‰",
        "email": "zhangsan@example.com",
        "role": "user"
    }
    
    create_response = await client.create_user(new_user)
    if create_response.success:
        print("ç”¨æˆ·åˆ›å»ºæˆåŠŸ:", create_response.data)

if __name__ == "__main__":
    import asyncio
    asyncio.run(main())
```

## ğŸ“± ç§»åŠ¨ç«¯é€‚é…

ç§»åŠ¨ç«¯ä¹Ÿå®Œç¾æ”¯æŒæ–°çš„æŒ‰é’®å¸ƒå±€ï¼š

```css
/* ç§»åŠ¨ç«¯æŒ‰é’®ä½ç½®è°ƒæ•´ */
@media screen and (max-width: 768px) {
  .code-toggle-btn {
    right: 70px; /* ç»™å¤åˆ¶æŒ‰é’®ç•™æ›´å¤šç©ºé—´ */
    width: 20px;
    height: 20px;
  }
  
  .md-clipboard {
    right: 8px !important;
    padding: 4px 8px !important;
  }
}
```

## ğŸ‰ åŠŸèƒ½æ€»ç»“

### âœ… æŒ‰é’®å¸ƒå±€ä¼˜åŒ–

- æŠ˜å æŒ‰é’®ç§»åˆ°å¤åˆ¶æŒ‰é’®å·¦ä¾§
- æ•´ä½“å¸ƒå±€æ›´åŠ åè°ƒç¾è§‚
- ç§»åŠ¨ç«¯å®Œç¾é€‚é…

### âœ… Markdownæ ‡è®°æ§åˆ¶

- æ”¯æŒ5ç§ä¸åŒçš„æ ‡è®°æ–¹å¼
- è‡ªåŠ¨æ£€æµ‹å¹¶åº”ç”¨æŠ˜å çŠ¶æ€
- ä¸localStorageçŠ¶æ€ç®¡ç†å…¼å®¹

### âœ… ç”¨æˆ·ä½“éªŒæå‡

- ç›´è§‚çš„è§†è§‰å¸ƒå±€
- çµæ´»çš„æ§åˆ¶æ–¹å¼
- å“åº”å¼è®¾è®¡æ”¯æŒ

ç°åœ¨æ‚¨å¯ä»¥åœ¨Markdownä¸­è½»æ¾æ§åˆ¶ä»£ç å—çš„åˆå§‹çŠ¶æ€ï¼ŒåŒæ—¶äº«å—æ›´åŠ åè°ƒçš„æŒ‰é’®å¸ƒå±€ï¼ğŸš€